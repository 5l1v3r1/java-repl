language: java
jdk:
  - oraclejdk8
env:
    global:
        - PROJECT_REPOSITORY="albertlatacz/java-repl"
        - PROJECT_VERSION=$TRAVIS_BUILD_NUMBER
        - secure: "bIFU+VgbcIJ5DmsXkoxTaLGI40uIyWdTFnco7FaJLoJLwLJSake4jemFv5SI\nJaSFVINBXA+Xn/qqHmFfWVr2fKsAevwRfkkIuTM1QMlN2TOMkCwOrz6mYA3f\nxjh+oKXUzNutZTHSyoCyZ72uHSJ33TlPWHU+OToS4AYxf8LrTYI="
        - secure: "O0xTkW+WBNWT0a44u7XRpm0vp0q04ZFv/ovmPX6nm3fRokuiHMoRaL1l7r1K\nLF9ow3n+Ncsl64XRJNv2rjKVrxb19GtZQjxnHqi6bW2FSnoTEJsfvIjgMOwh\nrOHL9MUP61idRqN15ki0qYsmZ8t3xN9rw04fJLGZn73Oy0uRSGI="
        - secure: "C5j0sZWXhfOoaVYyylyM7aJsjUSBbiIkW2GpAhODIrp/E5l297TymomFOCOTZSL1xF5V4RYt6jc7db+Qri5ryeHd0IIYMNWqcmni4rChtKp4b2F4qh+eqwre8RW5hONOcByZTQDvo+m3SCTuoTWcIM/UIhQIGovSPtYmqjQlSwI="
        - secure: "fpuaeSvHiDRtUGHRuCkaZOglaE8IujaCXjSShYP78kxaZUOkHCY6meGmk2YRB6nKTs80lpiQCGFOmtcdEOsCRt2kQXuzJR6NkcG8JEYbdD36G0zR/GpeZ38o3lZqd7Xy1FEGwTgMi0Wy699ZvSoBP1xtGz8A7f8G9ROV7E81gdw="
        - secure: "bxZ+/YMNG5guSA4R62wsIODwvslnqh4YwzaZjCuSO8FsXzEFkRLbZlgNTJYthcKEOZK0Oq+7d0nr0Dh2hKSgOx/FM2nCNzL3kMc/D4gAi54OET8wOv21PgiZQomPlZd5v62uTdw8XDrSzdEG8tzjrA21GDGNFF+Uuz3KPfoQfc0="
        - secure: "KdWNLW5VYhvGUMIB0Q4OwPfPAFLhVNi9hLRw2ZapBq245iVf7ayMXZznyOpSYgOjuXRqx/24ww+LSBFGM/rFetIiP2mA1A4RpxYpyRzJmfhxz3e4Rj71bE1JrLynY/MLIuH4NERMRdH1kZjQaY+IFkXqas5C+FD8Msj0owzlwLE="
        - secure: "Z5wmAFWOUv1fV3A/iCDrz9J59vZVzAn1tQigpYKdCTsvuZMHvk7SP3+3Aak2NEtuRzzu09WuBmCE6pfES3HbvD2W0jR2iqiv0bECnt5pCptC9QjlAw9vvGhm0Tz/aR4dJwzAjWBREU4LTgjN65416jclKV1HxhJcw90CZbYBmNo="
        - secure: "fovLGO44v27+u6dYAtT9zqpm/pJImgl6Bb4YqJ6VGSqx87axro3bkoeqlrw8aTThCqNxBCtoOPx7iPmQVi2l8fB5Dh7G8P50CYtT6fb9p8e7GHh9vZDBRk/UQmm5XALBX2dna1dN/UOKTyN/NFAajfCt6lAah5d9HvDpqw9E7Xs="



sudo: required

branches:
    only:
        - master

services:
  - docker

#install:
#  - pip install --user awscli
#  - export PATH=$PATH:$HOME/.local/bin

script:
  - gradle clean check shadowJar bintrayUpload

deploy:
    provider: releases
    api_key:
        secure: "Dlvp//L9a/9bHgtTZPWy+tTbsokq5f3fhobmR1tBtEQUiuOl0dl5nzVOq1tBb0AwPBmTudkBIwH1DW64WCnZnGUatiVznfEydGgCzaW8hNeg9S2iatNIjVjqWXrR/Id+Vg8gGoDomLltPL5qb5UBhdpiOT9Te/GH5/hRUw0NpvI="
    file: "build/libs/*.jar"
    file_glob: true
    skip_cleanup: true
    on:
        branch: master
        repo: $PROJECT_REPOSITORY


after_deploy:
    - sh bin/push-to-docker-hub.sh

after_success:
    - sh bin/set-tags.sh



